from engine.game_logic import define_character, say, show_scene, play_music, show_character, hide_character, choice, \
    show_chapter

narrator = define_character(None, color="#c8c8ff")
detective = define_character("Детектив", color="#ffcccb")
alan = define_character("Алан Хант", color="#ffcccb")
duke = define_character("Герцог",color="#ffcccb")
francis = define_character("Френсис Миллер", color="#ffcccb")
bartender = define_character("Бармен", color="#ffcccb")
evelyn = define_character("Эвелин", color="#ffcccb")
tennent = define_character("Миссис Теннонт",  color="#ffcccb")
stern = define_character("Стерн", color="#ffcccb")
woman = define_character("Женщина", color="#ffcccb")
agatha = define_character("Агата Блейк",color="#ffcccb" )
constable = define_character("Констебль",color="#ffcccb" )

def scene1():
    # Сцена 1: Дом Алана

    show_scene("alanhouse", effect="fade")
    play_music("music1.mp3", loop=True)

    say(narrator,
        "После разговора с Эвелин, Миллер чувствовал, как мысли озадачивают его, как облака, затмевающие ясное небо.")
    say(narrator,
        "Он решил найти утешение в доме своего друга Алана, надеясь, что его присутствие поможет развеять мрачные тени, скопившиеся в душе.")
    say(narrator,
        "Поднимаясь по знакомой тропинке к дому, он заметил, что вечернее солнце, будто бы сжалось в тусклый шар, бросая длинные тени на землю.")
    say(narrator, "Прибыв к двери, Миллер удивился, увидев, что она слегка приоткрыта.")
    say(narrator,
        "Это было странно — Алан всегда был аккуратен и осторожен. Он толкнул дверь, и она с легким скрипом открылась.")
    say(narrator, "Войдя внутрь, Миллер ощутил, как холодный воздух обнял его.")
    say(narrator, "Но то, что он увидел, заставило его сердце сжаться от тревоги: весь дом был перевернут.")
    say(narrator,
        "Стулья валялись на полу, книги разбросаны, а на стенах висели картины, словно их кто-то пытался сорвать в спешке.")

    choice([
        ("Осмотреть диван", "inspect_sofa"),
        ("Присмотреться к полу", "inspect_floor"),
        ("Осмотреть фортепиано", "inspect_piano")
    ])

    # Осмотреть диван
    say(None, "if choice_result == 'inspect_sofa'")
    say(narrator, "Он медленно прошел в кухню, где его внимание привлек диван стол.")
    say(narrator, "Миллер подошел ближе и заметил, что рядом с сигаретами лежит записка.")
    say(narrator, "Слова на бумаге были написаны спешно, небрежным почерком:")
    say(narrator,"[Текст на бумаге]")
    say(narrator, "Миллер почувствовал, как холодок пробежал по спине. Что же произошло с его другом?")
    say(narrator,
        "Он не мог оставить это без внимания. Теперь его мысли были полны не только беспокойства, но и решимости — он должен найти Алана, прежде чем станет слишком поздно.")

    # Присмотреться к полу
    say(None, "elif choice_result == 'inspect_floor'")
    say(narrator, "Он медленно прошел в кухню, где его взглядом провёл по всей мебели.")
    say(narrator, "Миллер вдруг заметил что-то блестящее на полу.")
    say(narrator,
        "Он наклонился и увидел кулон. Сердце его забилось быстрее, когда он осознал, что этот кулон, с его тонкой цепочкой, был на шее у Алана в тот вечер, когда они разговаривали в последний раз.")
    say(narrator, "Он поднял его, и в этот момент его охватило предчувствие беды.")

    # Осмотреть фортепиано
    say(None, "elif choice_result == 'inspect_piano'")
    say(narrator, "Он медленно прошел в кухню, где его внимание привлекло фортепиано.")
    say(narrator, "На нем лежала пачка сигарет, в которой не хватало уже двух.")
    say(narrator, "Это было странно — за сутки всё в этой квартире изменилось.")

    say(narrator, "Поднимаясь с кулоном в руке, он почувствовал, как что-то холодное и липкое коснулось его обуви.")
    say(narrator, "Он взглянул вниз и увидел, что пол покрыт темной, сверкающей лужей.")
    say(narrator,
        "Это была кровь. Страх сжался в его груди, и он, не в силах отвести взгляд, медленно двинулся дальше, следуя за зловещими следами.")
    say(narrator, "Он вошел в одну из комнат, и его сердце остановилось.")
    say(narrator, "На полу, в окружении разбросанных вещей, лежало тело светловолосой Эвелин.")
    say(narrator,
        "Ее глаза были закрыты, а на губах застыла тень улыбки, которая теперь казалась столь далекой от реальности.")
    say(narrator, "Миллер не мог поверить в то, что увидел.")
    say(narrator, "Вокруг нее были следы борьбы, а на полу — капли крови, которые вели к выходу.")
    say(narrator, "Он опустился на колени, его руки дрожали, когда он коснулся её руки, холодной и безжизненной.")
    say(narrator, "Все его мысли о том, что он должен был сделать, теперь слились в одну бездонную пропасть отчаяния.")

    say(narrator,
        "Миллер сидел за столом, его голова была опущена, а взгляд прикован к кулону, который он все еще держал в руках.")
    say(narrator, "Сердце его колотилось, а мысли метались в беспорядке.")
    say(narrator, "Он пытался осознать происходящее, но в голове царила лишь пустота.")
    say(narrator, "Он не мог поверить в то, что его друг убийца.")

    say(narrator, "Он продолжал сидеть даже когда стали пронзительные звуки полицейских сирен, разрывающий тишину.")
    say(narrator, "Он поднял голову и посмотрел в окно.")
    say(narrator, "Синее и красное мерцание огней пробивалось сквозь занавески, отражаясь в его глазах.")

def scene2():
    # Сцена 2: Мёртвое тело
    show_scene("scene", effect="fade")
    play_music("music2.mp3", loop=True)

    say(narrator, "В этот момент в дверь тихо и стандартно постучали.")
    say(narrator, "Миллер встал, чувствуя, как внутри него нарастает волнение.")
    say(narrator,
        "В двери оказался Теннент. Тот выглядел серьезно, его лицо было озабоченным, а глаза проницательными.")
    say(narrator, "По его виду было понятно, что он считает уже себя победителем этого дела.")

    say(tennent, "Миллер. Я слышал о случившемся. Нам нужно поговорить.")

    say(narrator, "Миллер кивнул. Теннент заметил его состояние и подошел ближе.")

    say(tennent, "Ты в порядке?")
    say(francis, "Нет. Она мертва. Я нашел её здесь.")

    say(narrator, "Теннент мгновенно изменился в лице, его выражение скривилось в непонимании.")
    say(narrator, "Не успев Уильям спросить что-то ещё, как начался ряд неприятных звуков.")
    say(narrator, "Френсис и Уильям повернулись и причиной этого ужасного звука – женщина.")

    show_character("woman", side="right")
    say(woman, "О, вот и вы, давно вы тут? Я немного задержалась пока искала свои записи для вас.")

    say(tennent, "Не могли бы вы представиться для начала?")
    say(woman, "Меня зовут Кэтрин.")
    say(woman, "Я живу на этаж выше этого дома. Я всегда наблюдаю за тем, что происходит вокруг.")
    say(woman,
        "Именно я вызвала полицию и именно я заметила странности тут. И я видела, как к Алану приходили странные люди!")

    say(francis, "Что тогда в ваших записках?")

    say(woman, "В этих записях я храню всю важную информацию о действиях Алана Ханта.")
    say(woman, "Этот юнец мне никогда не нравился.")

    choice([
        ("Спросить приезжал ли кто-то на постоянной основе", "ask_regular_visitors"),
        ("Известно ли ей что-нибудь о мертвой девушке", "ask_about_deceased"),
        ("Спросить, кто приезжал последним", "ask_last_visitor")
    ])

    # Спросить приезжал ли кто-то на постоянной основе
    say(None, "if choice_result == 'ask_regular_visitors'")
    say(francis, "Хм, к нему приезжал кто-то на постоянной основе?")
    say(woman, "Та, которая сейчас на полу.")

    choice([
        ("Известно ли зачем она приходила", "ask_reason"),
        ("Насколько часто она приходила", "ask_frequency")
    ])

    # Известно ли зачем она приходила
    say(None, "if choice_result == 'ask_reason'")
    say(francis, "Вам известна причина такого взаимоотношения?")
    say(woman,
        "Я ни разу не говорила с этой личностью, а от Ханта держалась подальше, ведь не знаю на что готов ещё этот убийца.")
    say(woman, "Честно говоря, я ни разу не общалась с этой дамой, а от Ханта старалась держаться подальше.")
    say(woman, "Кто знает, на что способен этот убийца!")
    say(woman, "Но вот однажды, возвращаясь домой поздним вечером, я стала свидетелем чего-то странного:")
    say(woman, "Они стояли на улице, обнявшись, как будто весь мир вокруг них не имел значения.")

    # Насколько часто она приходила
    say(None, "elif choice_result == 'ask_frequency'")
    say(francis, "Хм… Насколько часто она приходила?")
    say(woman, "Я же вам отдала свои записи. Сложно взглянуть?")
    say(woman, "Она появлялась как минимум дважды в неделю.")
    say(woman, "Но, знаете, иногда казалось, что это была не просто привычка, а что-то большее...")

    # Известно ли ей что-нибудь о мертвой девушке
    say(None, "elif choice_result == 'ask_about_deceased'")
    say(francis, "Вам известно что-нибудь о мёртвой девушке?")
    say(woman, "У неё есть клон")
    say(francis, "Что?")
    say(narrator, "Френсис с непониманием смотрит на Теннанта.")
    say(tennent, "Это значит, что у неё есть сестра-близнец. Я же прав?")
    say(woman, "Ну да.")

    choice([
        ("Известно ли что-нибудь о второй девушке", "ask_second_girl_info"),
        ("Часто ли приходила вторая девушка", "ask_second_girl_frequency")
    ])

    # Известно ли что-нибудь о второй девушке
    say(None, "if choice_result == 'ask_second_girl_info'")
    say(francis, "Известно ли что-нибудь о второй девушке?")
    say(woman, "Нет, я ничего не знаю о ней. Но те девицы хоть и похожи, но совершенно разные.")

    # Часто ли приходила вторая девушка
    say(None, "elif choice_result == 'ask_second_girl_frequency'")
    say(francis, "А вторая девушка часто приходила?")
    say(woman, "Только сегодня.")

    # Спросить, кто приезжал последним
    say(None, "elif choice_result == 'ask_last_visitor'")
    say(francis, "Не могли бы вы мне сказать кто приезжал последним?")
    say(woman, "Я заметила, что эти люди никогда здесь не были. Я знаю всех тут.")
    say(woman, "Там были две светловолосые девушки. И один солидный мужчина.")
    say(woman, "После они вышли с Аланом, но без одной девушки, а сам Алан был в ужасном состоянии.")
    say(woman,
        "Тогда я сразу поняла, что что-то не так! Я знала, что этот мальчишка готов пойти на многое, но, чтобы убивать так...")

    choice([
        ("Спросить про мужчину", "ask_about_man"),
        ("Спросить про девушек", "ask_about_girls")
    ])

    # Спросить про мужчину
    say(None, "if choice_result == 'ask_about_man'")
    say(francis, "Не могли бы вы рассказать про мужчину?")
    say(woman, "Это был врач с удивительной репутацией, когда-то считавшийся настоящим мастером своего дела.")
    say(woman, "Его знания и опыт привлекали пациентов со всех концов города.")
    say(woman, "Но жизнь внесла свои коррективы: он оказался за решеткой на целых тринадцать лет.")
    say(woman, "Теперь, когда он вновь на свободе, его жизнь наполнилась новыми оттенками.")
    say(woman, "Я вспомнила, как лечила его колени.")
    say(woman, "Его руки были мягкими и заботливыми, словно сами знали, как помочь.")
    say(woman,
        "В них чувствовалась уверенность и профессионализм, которые он когда-то демонстрировал в своей практике.")

    # Спросить про девушек
    say(None, "elif choice_result == 'ask_about_girls'")
    say(francis, "Расскажите подробнее про девушек.")
    say(woman, "Первая девушка была частым гостем, как мы уже знаем.")
    say(woman, "Вторая же появилась только сегодня, и её поведение казалось странным.")
    say(woman, "Она двигалась быстро, почти скрытно, и что-то явно скрывала.")
    say(francis, "Не могли бы вы рассказать о девушках?")
    say(narrator, "Соседка сделала глубокий вдох, её память начала восстанавливать детали.")

    say(woman,
        "Одна из них была знакома с этим местом, приходила сюда несколько раз, и каждый визит оставлял в её душе особый след.")
    say(woman, "Вторая же девушка появилась здесь впервые, её глаза блестели от любопытства и волнения.")
    say(woman,
        "Она с интересом изучала каждую деталь, словно искала в этом месте что-то важное, что могло бы изменить её жизнь.")

    say(narrator,
        "Кэтрин замолчала, её взгляд устремился куда-то внутрь себя, словно она снова переживала эти моменты.")
    say(woman, "Я вспомнила, как лечила его колени.")
    say(woman, "Его руки были мягкими и заботливыми, словно сами знали, как помочь.")
    say(woman,
        "В них чувствовалась уверенность и профессионализм, которые он когда-то демонстрировал в своей практике.")

    # Появление констебля
    say(narrator, "В этот момент появляется констебль и начинает ехидно смеяться над нами.")

    show_character("constable", side="left")
    say(constable, "Вам тут нечего делать больше, глупые юнцы.")
    say(constable, "А вас, женщина, я бы пригласил на личную беседу.")

    say(narrator, "Женщина немного приподняла свои брови, удивляясь всему этому, но последовала за констеблем.")
    say(narrator, "Когда Кэтрин ушла, напряжение в комнате стало ещё более ощутимым.")

    choice([
        ("Попытаться задать вопрос констеблю", "ask_constable"),
        ("Продолжить расследование без него", "continue_investigation")
    ])

    # Попытаться задать вопрос констеблю
    say(None, "if choice_result == 'ask_constable'")
    say(tennent, "Мистер констебль, мы сейчас занимаемся расследованием этого дела.")
    say(tennent, "У нас есть основания полагать, что информация этой женщины может быть ключевой.")
    say(constable, "Ха! Вы что, действительно верите всему, что она говорит?")
    say(constable, "Эта история слишком запутанная, чтобы быть правдой.")
    say(narrator, "Теннант заметил скептицизм в голосе констебля, но решил не сдаваться так быстро.")
    say(tennent, "Мы проверяем все версии, мистер констебль.")
    say(tennent, "И если у вас есть дополнительные вопросы к свидетелю, мы готовы ответить на них позже.")
    scene3()

    # Продолжить расследование без него
    say(None, "elif choice_result == 'continue_investigation'")
    say(stern, "Похоже, нам придется действовать самостоятельно.")
    say(stern, "Констебль явно не хочет сотрудничать, а время уходит.")
    say(francis, "Да уж, его подход скорее мешает, чем помогает.")
    say(narrator, "Теннант кивнул, соглашаясь с доводами своих товарищей.")
    say(tennent, "Ладно, давайте сосредоточимся на том, что у нас уже есть.")
    say(tennent, "Может быть, Эвелин всё-таки знает больше, чем говорит.")
    scene3()

def scene3():
    # Сцена 3: Склад

    say(francis, "Теннент, я скоро вернусь.")
    say(narrator, "Он не дожидался ответа и быстро направился к своей машине.")
    say(narrator, "Садясь за руль, он запустил двигатель и выехал на улицу, оставляя Кэтрин и Теннента позади.")
    say(narrator, "Миллер мчался по пустынным улицам, его мысли были сосредоточены на одном:")
    say(narrator, "Он должен добраться до заброшенного склада, где Эвелин спрятала ружьё.")
    say(narrator,
        "Он знал, что это место и это ружьё являются уликами, поэтому он мигом отправился на старое, неприметное здание на окраине города, о котором давно забыли.")
    say(narrator, "Дорога казалась бесконечной.")
    say(narrator, "Он ускорялся, чувствуя, как адреналин наполняет его тело.")
    say(narrator, "Наконец, он подъехал к складу.")
    say(narrator,
        "Здание выглядело так, будто его никто не трогал уже много лет: обшарпанные стены, разбитые окна и заросли травы вокруг.")
    say(narrator, "Миллер выбрался из машины и направился к двери, сердце колотилось в груди от волнения и тревоги.")
    say(narrator, "Он открыл дверь, и в воздухе запахло плесенью и старыми деревянными досками.")
    say(narrator, "Внутри было темно и пусто. Миллер быстро осмотрелся, но ружья не оказалось на месте.")
    say(narrator, "Он прошел дальше, заглядывая в каждый угол, но безрезультатно.")

    say(francis, "Чёрт…")

    say(narrator, "В этот момент он услышал легкий шорох.")
    say(narrator, "Миллер обернулся и увидел светловолосую девушку, которая выходила из тени.")
    say(narrator,
        "Это была девушка, которую он видел только что на полу, но она выглядела иначе — в её глазах был холод и решимость.")

    show_character("agatha", side="left")

    say(agatha, "Ты искал это?")
    say(narrator, "Она держит в руках ружьё, направленное прямо на него.")

    choice([
        ("Подтвердить намерение найти ружьё", "confirm_intention"),
        ("Спросить, кто она", "ask_who_she_is")
    ])

    # Подтвердить намерение найти ружьё
    say(None, "if choice_result == 'confirm_intention'")
    say(francis, "Да, я искал это ружьё.")
    say(narrator,
        "Френсис вспомнил, историю Стерна. Теперь это казалось частью тщательно продуманного плана, в котором Агата играла ключевую роль.")

    # Спросить, кто она
    say(None, "elif choice_result == 'ask_who_she_is'")
    say(francis, "И кто же ты?")
    say(agatha, "Моё имя — Агата Блейк.")
    say(agatha, "И ты быстро понял, что нужно забирать такие вещи.")
    say(agatha, "Видимо моя идея всё же прошла успешно.")

    say(narrator, "Агата шагнула ближе, и в её глазах заиграла искорка.")
    say(agatha, "Всё не так, как ты думаешь, Миллер. Ты не знаешь, с кем имеешь дело.")

    say(francis, "Ты была той любовницей, не так ли?")
    say(narrator,
        "Френсис вспомнил, историю Стерна. Теперь это казалось частью тщательно продуманного плана, в котором Агата играла ключевую роль.")
    say(agatha, "Да, я была той самой любовницей. Но ты не понимаешь, почему я это сделала.")

    say(narrator, "Миллер почувствовал, как его охватывает тревога.")
    say(narrator, "Он понимал, что за её словами скрывается нечто большее, чем просто желание отомстить.")
    say(agatha, "Люди, как правило, грешны и глупы,")
    say(agatha, "Даже осознавая, что это ловушка, они не смогут удержаться от соблазна.")
    say(agatha, "Вместо того чтобы объединиться, они лишь поубивают друг друга в своей слепоте.")

    say(narrator, "Агата сделала паузу, её глаза сверкнули, словно в них отразился весь мрак человеческой души.")

    say(agatha, "Мы с тобой похожи, Миллер.")

    say(francis, "И чем же?")

    say(agatha, "Мы оба верим, что знания, которые мы собираем, имеют ценность.")
    say(agatha, "Но на самом деле, это лишь иллюзия.")

    say(narrator, "В её руках была папка, на которой красовалась надпись «Ф. М.».")
    say(narrator, "Она медленно провела пальцем по её краям, словно это было нечто священное.")

    say(agatha, "Предлагаю сделку.")
    say(agatha, "Ты видишь эту папку, не так ли? Ты прекрасно понимаешь, что она собой представляет.")
    say(agatha, "Обмен дел: ты прекращаешь копать в мою сторону, а мы, в свою очередь, не раскрываем твоих карт.")

    choice([
        ("Принять сделку", "accept_deal"),
        ("Отказаться от сделки", "reject_deal")
    ])

    # Принять сделку
    say(None, "if choice_result == 'accept_deal'")
    say(francis, "Хорошо. Я согласен на твою сделку.")
    say(narrator, "Но он хотел больше, чем просто сохранить свою репутацию.")
    say(francis, "Я хочу понять, что ты действительно хочешь.")
    scene4()

    # Отказаться от сделки
    say(None, "elif choice_result == 'reject_deal'")
    say(francis, "— А что если я откажусь?")

    say(narrator, "Её улыбка была холодной, как зимний ветер.")
    say(agatha, "Как думаешь, что произойдёт, если я отнесу её в полицию и к журналистам?")
    say(agatha, "Какое у тебя будет репутационное наследие?")
    say(agatha, "«Лучший адвокат города сжёг собственный особняк...»")
    say(agatha, "Я много чего узнала о тебе, Миллер. Мои грехи ничто по сравнению с тем, что ты пытаешься скрыть.")
    say(agatha, "Так что скажи мне: кто из нас настоящий злодей?")

    say(narrator, "Миллер почувствовал, как под ногами начинает уходить земля.")
    say(narrator, "Его маска хладнокровия треснула, и он не смог сдержать дрожь в голосе.")

    say(francis, "— Ты не можешь так поступить!")
    say(narrator, "Произнёс он, его слова звучали почти в отчаянии.")

    say(francis, "Ты не понимаешь, что это значит для меня.")
    say(francis, "Я вложил в это всю свою жизнь, чтобы скрыть прошлое.")

    say(narrator,
        "Агата, заметив его растерянность, наклонилась ближе, её голос стал более мягким, но всё ещё полным угрозы.")
    say(agatha, "О, я как раз понимаю, что это значит.")
    say(agatha, "Ты боишься потерять всё, что ты построил.")
    say(agatha, "Но, Миллер, разве ты не понимаешь, что твоя репутация уже под угрозой?")

    say(narrator, "Он отступил на шаг, пытаясь собраться с мыслями, но тревога не отпускала.")

    say(francis, "Я не могу позволить, чтобы это стало публичным... Я не могу их подвести!")

    say(agatha, "Ты подводишь их каждый день, когда продолжаешь жить в лжи.")
    say(agatha,
        "Ты не единственный, кто имеет свои секреты, Миллер. Но ты единственный, кто продолжает прятаться от правды.")

    say(narrator, "Он закрыл глаза, пытаясь подавить нарастающее чувство паники.")

    say(francis, "Ты не знаешь, что я пережил,")
    say(narrator, "Его голос дрожал.")
    say(francis, "Ты не знаешь, каково это — жить с постоянным страхом, что всё может рухнуть в любой момент.")

    say(narrator, "Агата усмехнулась, её глаза сверкали от удовлетворения.")
    say(agatha, "А ты не знаешь, каково это — когда всё что тебе дорого рушится на твоих глазах.")
    say(agatha, "И даже шанса нет что-либо исправить.")
    say(agatha, "Я имела власть над человеком, который считает себя непобедимым.")
    say(agatha, "В итоге он пал. Также, как и его младший братик, собственно, как и ты сейчас.")
    say(agatha, "Я вижу, как ты борешься с собой, и это захватывающе.")

    say(narrator, "Он почувствовал, как его внутренние стены начинают рушиться.")

    say(francis, "Хорошо.")
    say(francis, "Я согласен на твою сделку.")
    say(francis, "Но я хочу больше, чем просто сохранить свою репутацию.")
    say(francis, "Я хочу понять, что ты действительно хочешь.")

    say(narrator, "Агата приподняла бровь, её улыбка стала чуть шире.")

    say(agatha, "В таком случае ты будешь неплохой пешкой на этой доске.")
    say(agatha, "Ты согласен помогать нам?")

    say(francis, "Да…")
    say(narrator,
        "Его голос дрожал, но тем не менее, он звучал достаточно уверенно, чтобы не выдать его внутреннюю борьбу.")

    say(agatha, "Я дарую тебе великое молчание.")
    say(agatha, "На этой обещанной земле, где мы встретимся, ты поймёшь, что молчание иногда красноречивее слов.")
    scene4()

def scene4():
    # Сцена 4: Путь в ДИТ

    show_scene("warehouse_scene", effect="fade")
    play_music("music3.mp3", loop=True)

    say(narrator,
        "Они обменялись папками, и в тот же миг Агата исчезла, как тень, растворяющаяся в темноте заброшенного склада.")
    say(narrator,
        "Миллер остался один, окружённый глухими стенами, которые казались ещё более угрюмым и безжизненным местом, чем прежде.")
    say(narrator,
        "Пахло сыростью и ржавчиной, а свет, пробивающийся сквозь грязные окна, создавал зловещие тени, которые плясали на полу, словно предвестники чего-то ужасного.")

    say(narrator, "С каждой секундой его сердце колотилось всё быстрее, как будто пытаясь вырваться из груди.")
    say(narrator,
        "Он оглянулся, но вокруг не было никого, только эхо его дыхания, которое становилось всё более учащённым и прерывистым.")
    say(narrator,
        "Внезапно в горле застрял ком, и он почувствовал, как его грудная клетка сжимается, словно кто-то хватал его за горло.")

    say(francis, "Успокойся.")
    say(narrator, "Шептал он себе, но слова звучали пусто, как эхо в этой мрачной тишине.")

    say(francis, "Ты справишься.")
    say(narrator,
        "Но страх, как тёмная тень, накрывал его с головой, и он не мог избавиться от ощущения, что всё вокруг начинает сжиматься, как капсула, готовая разорваться.")

    say(narrator, "Миллер закрыл глаза, надеясь, что, когда он откроет их снова, всё окажется лишь дурным сном.")
    say(narrator,
        "Но когда он снова взглянул на окружающее, то увидел лишь пустоту и мрак, которые окружали его со всех сторон.")
    say(narrator, "И в этот момент он понял: он не может больше ждать. Ему нужно было выбраться отсюда.")

    say(francis, "Нужно выйти…")
    say(narrator, "Прошептал он, но его голос звучал так, словно принадлежал кому-то другому.")
    say(narrator,
        "Он снова оглянулся, но вокруг не было ни души, только глухая тишина, которая давила на него, как тяжёлое одеяло.")

    say(narrator,
        "С каждым вдохом, он ощущал, как воздух становится всё более вязким, словно он пытался дышать под водой.")
    say(narrator,
        "Его руки стали холодными и влажными, а в ушах зазвенело, как будто кто-то играл на флейте, извлекая из неё тревожные ноты.")
    say(narrator,
        "Он схватился за голову, пытаясь справиться с наплывом эмоций, которые захлестнули его, как бурное море.")

    say(francis, "Успокойся.")
    say(narrator, "Повторял он, но его собственные слова казались далёкими, как шёпот из другого мира.")
    say(narrator, "Внезапно его охватило чувство безысходности, и он почувствовал, как его ноги подкашиваются.")

    say(narrator, "Миллер прислонился к стене, пытаясь найти опору, но и она казалась ненадёжной.")
    say(narrator,
        "Он закрыл глаза, и в темноте за ними возникли образы: лица людей, которых он любил, их улыбки и смех, которые теперь казались такими далёкими.")
    say(narrator, "Он не мог позволить, чтобы это стало концом.")

    say(francis, "Я не могу здесь оставаться. Я найду выход.")
    say(narrator, "Миллер вышел из склада, и его встретила темнота.")
    say(narrator, "Небо было затянуто тяжёлыми облаками, а ветер свистел, принося с собой холод.")
    say(narrator, "Он сделал шаг вперёд, но тревога не покидала его.")
    say(narrator,
        "Воспоминания о том, что произошло внутри, всё ещё преследовали его, и он не мог избавиться от чувства, что тьма всё ещё рядом.")

    say(narrator,
        "Вдруг он заметил неоновый знак кафе в конце улицы, который ярко сверкал, несмотря на окружающую тьму.")
    say(narrator, "Это было как маяк в бурном море.")
    say(narrator, "Он посмотрел на вывеску: «Город Дит».")
    say(narrator, "Миллер ускорил шаги, ощущая, как решимость вновь наполняет его.")
    say(narrator, "Он вошёл в кафе, и его окутало тёплой атмосферой.")
    say(narrator, "Внутри было уютно и спокойно, и аромат свежезаваренного кофе смешивался с запахом выпечки.")
    say(narrator, "Это было в контрасте с мрачным складом, который он только что покинул.")

    show_character("agatha", side="left")

    say(agatha, "Ты в порядке?")
    say(francis, "Я… я выбрался.")

    say(narrator, "Миллер подошёл к Агате, но его внимание отвлекли другие посетители кафе.")
    say(narrator, "В углах сидели люди, которые выглядели настороженно и угрожающе.")
    say(narrator, "Некоторые из них переглядывались, а их разговоры были полны шёпота и напряжённости.")
    say(narrator, "Миллер ощутил, как его тревога вновь нарастает.")
    say(narrator,
        "Эти люди казались ему бандитами или убийцами, и он не мог избавиться от чувства, что находится в опасности.")

    say(agatha, "Не обращай внимания на них. Здесь все просто ищут укрытие от мира. Они обычные грешники.")

    choice([
        ("Спросить про Алана", "ask_about_alan"),
        ("Осмотреть помещение", "inspect_room")
    ])

    # Спросить про Алана
    say(None, "if choice_result == 'ask_about_alan'")
    say(francis, "А где Алан? Я должен знать, что он жив.")
    say(narrator, "Агата посмотрела на него с пониманием, и её глаза наполнились сочувствием.")
    say(agatha, "Я знаю, что он важен для тебя. Мы обязательно отправимся к нему. Не волнуйся, пока он будет жить.")

    say(narrator, "Миллер почувствовал, как его охватывает напряжение.")
    say(narrator, "Он не мог позволить себе оставаться в этом кафе слишком долго, но и уходить было страшно.")

    say(francis, "Как мне добраться до него? Я не могу ждать.")
    say(narrator, "Агата, заметив, как Миллер волнуется, решила использовать его эмоции в своих интересах.")
    say(narrator, "Она сделала шаг ближе, её голос стал тихим и уверенным.")

    say(agatha, "Слушай, я понимаю, как тебе важно знать, что Алан в безопасности.")
    say(agatha, "Но чтобы это произошло, нам нужно действовать осторожно.")
    say(agatha, "Я могу помочь, но только если ты согласишься на одну небольшую жертву.")

    say(narrator, "Миллер нахмурился, не понимая, что она имеет в виду.")

    say(francis, "Какую жертву?")
    say(narrator, "Агата наклонилась ближе, её глаза сверкали в тусклом свете кафе.")

    say(agatha, "Мне нужно, чтобы ты подтвердил информацию, что Алан убил своего брата.")
    say(agatha, "Это будет ложный след, но он поможет нам отвлечь внимание от настоящих событий.")
    say(agatha, "Если ты сделаешь это, я смогу организовать встречу с ним уже на следующий день.")

    say(narrator, "Миллер почувствовал, как его сердце забилось быстрее.")
    say(narrator, "Он не мог поверить, что Агата предлагает такое.")

    say(francis, "Ты хочешь, чтобы я солгал? Как я могу так поступить с ним?")

    say(narrator, "Агата взяла его руку, как будто пытаясь успокоить его.")

    say(agatha, "Я понимаю, что это трудно.")
    say(agatha, "Но подумай о том, что может произойти, если ты не сделаешь этого.")
    say(agatha,
        "Алан в опасности, и если ты не подтвердишь эту версию, его могут найти раньше, плавающим вверх брюхом.")

    say(narrator, "Миллер замер, его мысли метались.")
    say(narrator, "Он понимал, что это рискованный шаг, но ради Алана он был готов на многое.")

    say(francis, "Ладно. Я сделаю это. Но только если ты действительно сможешь помочь мне увидеть его.")

    say(narrator, "Агата улыбнулась, и в её глазах мелькнуло одобрение.")

    say(agatha, "Я обещаю. Давай сделаем это вместе.")

    say(narrator, "Миллер кивнул, чувствуя, как его решимость укрепляется.")
    say(narrator,
        "Он понимал, что впереди их ждёт опасный путь, но с каждым шагом он всё больше осознавал, что готов сразиться за своего друга, даже если это означало идти на противоречивые компромиссы.")

    show_chapter("ГЛАВА 6", effect="fade", next_script="scripts.chapter6:start")


def start():
    scene1()